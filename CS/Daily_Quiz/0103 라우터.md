## 01/03 라우터



### 라우터 (Router)

라우터는 패킷의 위치를 추출하여, 그 위치에 대한 최적의 경로를 지정하며, 이 경로를 따라 데이터 패킷을 다음 장치로 전향시키는 장치입니다. 이때 최적의 경로는 일반적으로는 가장 빠르게 통신이 가능한 경로이므로, 이것이 최단 거리 일수도 있지만, 돌아가는 경로라도 고속의 전송로를 통하여 전달이 되는 경로가 될 수 있습니다. 즉, 라우터(Router)는 이름 그래도 네트워크와 네트워크 간의 경로(Route)를 설정하고 가장 빠른 길로 트래픽을 이끌어주는 네트워크 장비



또한 라우터의 대표적인 기능은 네트워크와 네트워크를 연결하는 것이지만, NAT(Network Address Translation), 방화벽, VPN(Virtual Private Network), QoS(Quality of Service)등 다양한 부가 기능을 함께 제공하기도 합니다. 



### 라우팅 프로토콜의 종류

Static Routing(정적 라우팅)

관리자가 네트워크에 대한 경로 정보를 직접 지정하여 라우팅 합니다. 관리자에 의한 라우팅 정보만을 참조하여 라우터 자체 부담이 줄어들고 동적 라우팅 보다 빠르며 안정적입니다. 하지만 네트워크 변화가 빈번하거나 등록할 네트워크 수가 많을 경우 경로 설정을 변경하기 어렵습니다.



Dynamic Routing(동적 라우팅)

대규모 네트워크에 사용하며 라우터간의 변경된 네트워크에 대한 정보를 자동으로 교환하여 라우팅합니다. 또한 Routing table을 자동으로 작성하여 관리자의 초기 설정만 필요합니다. 다만 Static Routing보다 메모리를 많이 차지한다는 단점이 있습니다.



IGP(Internal Gateway Routing Protocol)

동일 그룹 네트워크에서 라우팅 정보를 교환할 때 사용되는 라우팅 프로토콜입니다. 라우터로 서로 연결되어 있는 여러개의 네트워크 집합을 도메인 or AS(Autonomous System)이라고 합니다. 해당 도메인과 AS 안에 존재하는 라우터는 Domain 내부 라우터로, Domain 내부 경로 설정에 관한 프로토콜이 IGP입니다.



EGP(External Gateway Routing Protocol)

다른 그룹과 라우팅 정보를 교환할때 사용되는 라우팅 프로토콜입니다.



Distance Vector

Routing table을 위한 요소를 거리와 방향에 중점을 둔 라우팅 알고리즘이며 Routing table을 연결된 라우터와 교환하여 생성합니다. 홉 수를 기준으로 최적 경로를 결정합니다.

모든 라우터들은 주기적으로 서로 Routing table을 교환하면서 Routing 정보에 변화가 없는지 관리합니다. 이에 대한 프로토콜은 RIP와 IGRP가 있습니다.



Link State Vector

Link State는 Distance Vector가 가지고 있는 단점을 극복하고자 만들어졌습니다. Link State는 네트워크의 토폴로지 정보를 DB로 구성하고 이를 사용하여 SPF(Shortest Path First) 알고리즘을 사용하여 Routing table을 작성합니다. 또한 네트워크 상에서 변화가 있을때만 Routing 정보를 전달합니다.

그래서 주기적으로 Routing 정보를 전송하는 Distance Vector보다는 트래픽이 적습니다. 하지만 토폴로지 등 다른 정보를 사용하기에 메모리를 많이 사용합니다. 또한 계층적 구조를 가져 환경설정이 복잡합니다.



### 라우터의 기능

OSI7 계층 중 3 계층에 속하는 장비이며 다음과 같이 크게 두 가지 기능을 합니다. 또한 3계층이므로 IP주소를 사용하여 전달합니다. 단 서로 같은 프로토콜을 사용해야 합니다.



경로 설정(path determination)

데이터 패킷이 목적지까지 갈 수 있는 길을 검사하고 어떤 경로로 전송하는 것이 가장 효율적 일지 결정합니다.



스위칭(switching)

경로가 결정되면 해당 경로로 데이터 패킷을 넘겨주는 것을 말합니다.



### 라우팅 테이블

라우터는 라우팅 테이블에 경로에 대한 지도 정보를 유지합니다. 하지만 지도 정보가 RAM에 유지 되기 때문에 전원이 꺼지면 정보가 소실됩니다. 라우팅 프로토콜의 가장 중요한 목적이 바로 라우팅 테이블의 구성입니다.



### 라우팅에 사용되는 정보

다음에 대한 정보가 라우팅에 사용됩니다.

- 목적지 주소
- 토폴로지
- 트래픽 부하
- 링크 비용(라우팅 매트릭) : 흡수, 비용, 지연, 처리율 등

