## 01/17 ORM

### ORM(Object-Relational-Mapping)

- oop 언어와 데이터를 다루는 rdbms와의 상이한 시스템을 매핑하여 쉽게 데이터 관련 oop 프로그래밍을 쉽게 하도록 하기 위한 기술
- oop의 class 구조와 object-graph 는 rdbms의 table, relation 으로 표현이 가능한데 서로 표현방식에 차이가 있기 때문에 이를 매핑을 통해 변환을 해주어야 한다. 이때 중간에서 소통을 해주는 친구가 ORM
- 개발자는 oop에 의한 개발에만 집중하고 rdbms적인것은 조금만 고려하면 됨
- dataSet,DataTable,sql문을 중심으로 한 data와 html,js만 있는 단순 app이 oop의 다양한 list,repository등의 다양한 기술로 업그레이드 된 app을 완성



### ORM 장,단점

#### 장점

- 객체 지향적인 코드로 인해 더 직관적이고 비즈니스 로직에 더 집중할 수 있게 도와준다.
  - 선언문, 할당, 종료 같은 부수적인 코드가 급격히 줄어든다
  - 각종 객체에 대한 코드를 별도로 작성하기 때문에 코드의 가독성을 올려준다.
  - SQL의 절차적이고 순차적인 접근이 아닌 객체 지향적인 접근으로 인해 생산성 증가



- 재사용 및 유지보수의 편리성이 증가
  - ORM은 독립적으로 작성되어있고, 해당 객체들을 재활용 할 수 있다.
  - 때문에 모델에서 가공된 데이터를 컨트롤러에 의해 뷰와 합쳐지는 형태로 디자인 패턴을 견고하게 다지는데 유리하다.
  - 매핑정보가 명확하여, ERD를 보는 것에 대한 의존도를 낮출 수 있다.



- DBMS에 대한 종속성이 줄어든다
  - 대부분 ORM 솔루션은 DB에 종속적이지 않다.
  - 종속적이지 않다는 것은 구현 방법 뿐만 아니라 많은 솔루션에서 자료형 타입까지 유효하다.
  - 프로그래머는 Object에 집중함으로서 극단적으로 DBMS를 교체하는 거대한 작업에도 비교적 적은 리스크와 시간이 소요된다.
  - 또한 자바에서 가공할 경우 equals, hashCode의 오버라이드 같은 자바의 기능을 이용할 수 있고, 간결하고 빠른 가공이 가능하다.



#### 단점

- 완벽한 ORM으로만 서비스를 구현하기가 어렵다
  - 사용하기는 편하지만 설계는 매우 신중하게 해야한다.
  - 프로젝트의 복잡성이 커질경우 난이도 또한 올라갈 수 있다.
  - 잘못 구현된 경우에 속도 저하 및 심각할 경우 일관성이 무너지는 문제점이 생길 수 있다.
  - 일부 자주 사용되는 대형 쿼리는 속도를 위해 SP를 쓰는 증 별도의 튜닝이 필요한 경우가 있다.



- 프로시저가 많은 시스템에선 ORM의 객체 지향적인 장점을 활용하기 어렵다.
  - 이미 프로시저가 많은 시스템에선 다시 객체로 바꿔야하며, 그 과정에서 생산성 저하나 리스크가 많이 발생할 수 있다.



### Python에서의 ORM



- python orm 라이브러리는 관계형 db에 엑세스하는데 반드시 필요로 하지 않음, 단순 매핑을 도와줌
- 저수준 액세스는 postgereSQL이나 mysql 같은 경우는 db connector lib로 제공됨
- 아래의 표는 orm이 web framework,connector,db에서 작동하는 방법을 보여줌_sqlAlchemy가 다양한 곳에서 쓰이는 것을 확인





#### Python orm 구현

1. sqlalchemy
2. peewee
3. django orm
4. ponyorm
5. sqlobject





