strtok_r() 함수는 C 프로그래밍 언어에서 제공되는 함수 중 하나로, 문자열을 DELIMITERS(구분자)로 나누어서 토큰으로 반환합니다. 이 함수는 문자열을 처음 호출할 때, 인자로 받아서 나누고자 하는 문자열을 전달하고, 그 다음부터는 NULL 포인터를 전달해주어야 합니다. 또한, 이 함수는 토큰화된 문자열의 현재 위치를 추적하기 위해 SAVE_PTR이라는 변수를 사용합니다.

이 함수는 매 호출마다, 문자열에서 다음 토큰을 반환하며, 더 이상 토큰이 남아있지 않으면 NULL을 반환합니다. 또한, 이 함수는 여러 개의 연속된 구분자를 하나의 구분자로 처리하며, 반환된 토큰은 길이가 0이 될 수 없습니다. DELIMITERS는 한 호출에서 다음 호출로 변경될 수 있습니다.

중요한 점은, strtok_r() 함수는 문자열 S를 수정하여 구분 기호를 NULL 바이트로 변경합니다. 따라서 S는 수정 가능한 문자열이어야 하며, 문자열 상수는 수정할 수 없으므로 주의해야 합니다.

예를 들어, "apple,banana,grape"라는 문자열이 있다면, strtok_r() 함수를 사용하여 "," 구분자를 기준으로 문자열을 나누어 토큰으로 반환할 수 있습니다. 이 경우, 첫 호출에서는 문자열 전체를 전달하고, 다음 호출부터는 NULL을 전달합니다. 함수를 호출할 때마다, "," 구분자를 기준으로 나누어진 다음 토큰이 반환되며, 더 이상 반환할 토큰이 없으면 NULL을 반환합니다.